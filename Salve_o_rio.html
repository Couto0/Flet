<!DOCTYPE html>
<html>
<head>
    <title>Salve o Rio - Twine/Harlowe</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f8ff;
            color: #333;
            line-height: 1.6;
        }
        .container {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-left: 5px solid #2a9d8f;
        }
        h1 {
            color: #264653;
            text-align: center;
            border-bottom: 2px solid #2a9d8f;
            padding-bottom: 10px;
        }
        .location {
            background-color: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2a9d8f;
        }
        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 20px;
        }
        .option {
            padding: 12px 15px;
            background-color: #2a9d8f;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s;
            display: block;
            margin-bottom: 8px;
        }
        .option:hover {
            background-color: #1d7a6e;
        }
        .inventory {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            border: 1px dashed #2a9d8f;
            margin: 15px 0;
        }
        .item {
            display: inline-block;
            background-color: #e8f4f8;
            padding: 5px 10px;
            margin: 5px;
            border-radius: 15px;
            border: 1px solid #2a9d8f;
        }
        .evidence {
            margin-top: 15px;
            padding: 10px;
            background-color: #ffe8a1;
            border-radius: 5px;
            border-left: 4px solid #e9c46a;
        }
        .success {
            color: #2a9d8f;
            font-weight: bold;
        }
        .warning {
            color: #e76f51;
            font-weight: bold;
        }
        .final {
            text-align: center;
            padding: 20px;
            background-color: #e8f4f8;
            border-radius: 10px;
            margin-top: 20px;
        }
        .good {
            color: #2a9d8f;
        }
        .bad {
            color: #e76f51;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Salve o Rio</h1>
        
        <div id="game-content">
            <!-- O conte√∫do do jogo ser√° carregado aqui via JavaScript -->
        </div>
    </div>

    <script>
        // Vari√°veis do jogo
        let gameState = {
            inventory: [],
            location: "centro",
            investigouFabrica: false,
            investigouLixao: false,
            investigouEsgoto: false,
            amostrasColetadas: 0,
            evidencias: 0,
            temCracha: false
        };

        // Salvar estado do jogo no localStorage
        function saveGame() {
            localStorage.setItem('salveORioSave', JSON.stringify(gameState));
        }

        // Carregar estado do jogo do localStorage
        function loadGame() {
            const savedGame = localStorage.getItem('salveORioSave');
            if (savedGame) {
                gameState = JSON.parse(savedGame);
            }
        }

        // Iniciar o jogo
        function startGame() {
            loadGame();
            showLocation(gameState.location);
        }

        // Mostrar localiza√ß√£o atual
        function showLocation(locationId) {
            gameState.location = locationId;
            saveGame();
            
            const contentDiv = document.getElementById('game-content');
            contentDiv.innerHTML = '';
            
            switch(locationId) {
                case 'centro':
                    showCentro();
                    break;
                case 'fabrica':
                    showFabrica();
                    break;
                case 'lixao':
                    showLixao();
                    break;
                case 'esgoto':
                    showEsgoto();
                    break;
                case 'inventario':
                    showInventario();
                    break;
                case 'final':
                    showFinal();
                    break;
                default:
                    showCentro();
            }
        }

        // Adicionar item ao invent√°rio
        function addItem(item) {
            if (!gameState.inventory.includes(item)) {
                gameState.inventory.push(item);
                saveGame();
                return true;
            }
            return false;
        }

        // Verificar se tem um item
        function hasItem(item) {
            return gameState.inventory.includes(item);
        }

        // Mostrar tela do centro
        function showCentro() {
            const contentDiv = document.getElementById('game-content');
            
            let html = `
                <div class="location">
                    <h2>Margem do Rio</h2>
                    <p>Voc√™ est√° na margem do Rio Esperan√ßa, que outrora foi cristalino e cheio de vida, mas agora est√° polu√≠do e moribundo. A comunidade local est√° preocupada e voc√™ se voluntariou para investigar as fontes de polui√ß√£o.</p>
                    <p>O que voc√™ deseja fazer?</p>
                </div>
                
                <div class="evidence">
                    <strong>Evid√™ncias coletadas:</strong> ${gameState.evidencias}/6<br>
                    <strong>Amostras coletadas:</strong> ${gameState.amostrasColetadas}/3
                </div>
                
                <div class="options">
                    <a href="#" class="option" onclick="showLocation('fabrica')">üîç Investigar a F√°brica Qu√≠mica</a>
                    <a href="#" class="option" onclick="showLocation('lixao')">üóëÔ∏è Investigar o Lix√£o</a>
                    <a href="#" class="option" onclick="showLocation('esgoto')">üíß Investigar o Sistema de Esgoto</a>
                    <a href="#" class="option" onclick="showLocation('inventario')">üéí Verificar seu invent√°rio</a>
            `;
            
            if (gameState.amostrasColetadas >= 3 && gameState.evidencias >= 5) {
                html += `<a href="#" class="option" onclick="showLocation('final')" style="background-color: #e76f51;">üöÄ Confrontar os respons√°veis</a>`;
            }
            
            html += `</div>`;
            
            contentDiv.innerHTML = html;
        }

        // Mostrar tela da f√°brica
        function showFabrica() {
            if (!gameState.investigouFabrica) {
                gameState.investigouFabrica = true;
                gameState.evidencias += 1;
                saveGame();
            }
            
            const contentDiv = document.getElementById('game-content');
            
            let html = `
                <div class="location">
                    <h2>F√°brica Qu√≠mica</h2>
                    <p>Voc√™ chega √† f√°brica qu√≠mica "QuimicaPoluente Ltda". O cheiro de produtos qu√≠micos √© forte no ar. Voc√™ nota que h√° um cano saindo da f√°brica e despejando l√≠quido diretamente no rio.</p>
                    <p>O que voc√™ faz?</p>
                </div>
                
                <div class="options">
                    <a href="#" class="option" onclick="coletarAmostraFabrica()">üß™ Coletar amostra da √°gua perto do cano</a>
                    <a href="#" class="option" onclick="entrarFabrica()">üè≠ Tentar entrar na f√°brica para investigar</a>
                    <a href="#" class="option" onclick="showLocation('centro')">‚¨ÖÔ∏è Voltar para o rio</a>
                </div>
            `;
            
            contentDiv.innerHTML = html;
        }

        // Coletar amostra na f√°brica
        function coletarAmostraFabrica() {
            if (addItem("Amostra da F√°brica")) {
                gameState.amostrasColetadas += 1;
                saveGame();
                alert("Voc√™ coletou uma amostra da √°gua perto do cano de despejo. Est√° com uma colora√ß√£o estranha e cheiro forte.");
            } else {
                alert("Voc√™ j√° coletou uma amostra aqui.");
            }
            showLocation('fabrica');
        }

        // Tentar entrar na f√°brica
        function entrarFabrica() {
            if (gameState.temCracha) {
                gameState.evidencias += 2;
                saveGame();
                alert("Voc√™ usa o crach√° que encontrou no lix√£o para entrar na f√°brica sem ser notado. Dentro, encontra documentos que comprovam o despejo irregular de res√≠duos t√≥xicos.");
                showLocation('centro');
            } else {
                alert('Um seguran√ßa impede sua entrada. "√Årea restrita!", ele diz. Voc√™ precisar√° de uma identifica√ß√£o para entrar.');
                showLocation('fabrica');
            }
        }

        // Mostrar tela do lix√£o
        function showLixao() {
            if (!gameState.investigouLixao) {
                gameState.investigouLixao = true;
                gameState.evidencias += 1;
                saveGame();
            }
            
            const contentDiv = document.getElementById('game-content');
            
            let html = `
                <div class="location">
                    <h2>Lix√£o Municipal</h2>
                    <p>Voc√™ chega ao lix√£o municipal. O local √© imenso e mal administrado. Voc√™ nota que parte do lixo est√° sendo arrastado pela chuva em dire√ß√£o ao rio.</p>
                    <p>O que voc√™ faz?</p>
                </div>
                
                <div class="options">
                    <a href="#" class="option" onclick="investigarMargemLixao()">üîé Investigar a margem do rio perto do lix√£o</a>
                    <a href="#" class="option" onclick="procurarDocumentosLixao()">üìÑ Procurar por documentos ou pistas</a>
                    <a href="#" class="option" onclick="showLocation('centro')">‚¨ÖÔ∏è Voltar para o rio</a>
                </div>
            `;
            
            contentDiv.innerHTML = html;
        }

        // Investigar margem do lix√£o
        function investigarMargemLixao() {
            if (addItem("Amostra do Lix√£o")) {
                gameState.amostrasColetadas += 1;
                saveGame();
                alert("Voc√™ encontra res√≠duos s√≥lidos e l√≠quidos escorrendo do lix√£o diretamente para o rio. Coleta uma amostra como evid√™ncia.");
            } else {
                alert("Voc√™ j√° coletou uma amostra aqui.");
            }
            showLocation('lixao');
        }

        // Procurar documentos no lix√£o
        function procurarDocumentosLixao() {
            if (!gameState.temCracha) {
                addItem("Crach√° de Identifica√ß√£o");
                gameState.temCracha = true;
                saveGame();
                alert("Enquanto vasculha a √°rea, voc√™ encontra um crach√° de identifica√ß√£o da f√°brica qu√≠mica. Isso pode ser √∫til!");
            } else {
                alert("Voc√™ n√£o encontra nada de novo.");
            }
            showLocation('lixao');
        }

        // Mostrar tela do esgoto
        function showEsgoto() {
            if (!gameState.investigouEsgoto) {
                gameState.investigouEsgoto = true;
                gameState.evidencias += 1;
                saveGame();
            }
            
            const contentDiv = document.getElementById('game-content');
            
            let html = `
                <div class="location">
                    <h2>Esta√ß√£o de Esgoto</h2>
                    <p>Voc√™ chega √† esta√ß√£o de tratamento de esgoto. Parece negligenciada e mal conservada. H√° sinais de que o esgoto n√£o tratado est√° vazando para o rio.</p>
                    <p>O que voc√™ faz?</p>
                </div>
                
                <div class="options">
                    <a href="#" class="option" onclick="coletarAmostraEsgoto()">üß™ Coletar amostra do esgoto</a>
                    <a href="#" class="option" onclick="inspecionarTubulacoes()">üîß Inspecionar as tubula√ß√µes</a>
                    <a href="#" class="option" onclick="showLocation('centro')">‚¨ÖÔ∏è Voltar para o rio</a>
                </div>
            `;
            
            contentDiv.innerHTML = html;
        }

        // Coletar amostra no esgoto
        function coletarAmostraEsgoto() {
            if (addItem("Amostra de Esgoto")) {
                gameState.amostrasColetadas += 1;
                saveGame();
                alert("Voc√™ coleta uma amostra da √°gua que est√° vazando da esta√ß√£o de tratamento. Claramente, o esgoto n√£o est√° sendo tratado adequadamente.");
            } else {
                alert("Voc√™ j√° coletou uma amostra aqui.");
            }
            showLocation('esgoto');
        }

        // Inspecionar tubula√ß√µes
        function inspecionarTubulacoes() {
            gameState.evidencias += 1;
            saveGame();
            alert("Voc√™ encontra uma tubula√ß√£o rompida que est√° despejando esgoto diretamente no rio. Tira fotos como evid√™ncia.");
            showLocation('esgoto');
        }

        // Mostrar invent√°rio
        function showInventario() {
            const contentDiv = document.getElementById('game-content');
            
            let html = `
                <div class="location">
                    <h2>Seu Invent√°rio</h2>
                    <div class="inventory">
            `;
            
            if (gameState.inventory.length === 0) {
                html += `<p>Seu invent√°rio est√° vazio.</p>`;
            } else {
                html += `<p>Itens no seu invent√°rio:</p>`;
                gameState.inventory.forEach(item => {
                    html += `<div class="item">${item}</div>`;
                });
            }
            
            html += `
                    </div>
                </div>
                
                <div class="options">
                    <a href="#" class="option" onclick="showLocation('centro')">‚¨ÖÔ∏è Voltar para o rio</a>
                </div>
            `;
            
            contentDiv.innerHTML = html;
        }

        // Mostrar final do jogo
        function showFinal() {
            const contentDiv = document.getElementById('game-content');
            
            let resultado = "";
            if (gameState.evidencias >= 6) {
                resultado = `
                    <h2 class="good">Final √ìtimo!</h2>
                    <p>Sua investiga√ß√£o foi completa! A f√°brica foi multada e obrigada a instalar sistemas de tratamento, o lix√£o foi saneado e a esta√ß√£o de esgoto foi reformada. O rio come√ßa a se recuperar!</p>
                `;
            } else if (gameState.evidencias >= 4) {
                resultado = `
                    <h2 class="good">Final Bom</h2>
                    <p>Sua investiga√ß√£o foi boa. A f√°brica foi multada, mas outras fontes de polui√ß√£o continuam. O rio melhora, mas n√£o completamente.</p>
                `;
            } else {
                resultado = `
                    <h2 class="bad">Final Regular</h2>
                    <p>Sua investiga√ß√£o foi limitada. Apenas algumas medidas s√£o tomadas, e o rio continua amea√ßado.</p>
                `;
            }
            
            let html = `
                <div class="final">
                    <h2>Resultado da Investiga√ß√£o</h2>
                    <p>Com todas as evid√™ncias coletadas, voc√™:</p>
                    <ul>
                        <li>Entrega as amostras para um laborat√≥rio independente</li>
                        <li>Envia as fotos e documentos para a imprensa</li>
                        <li>Organiza a comunidade para protestar</li>
                    </ul>
                    
                    ${resultado}
                    
                    <div class="options">
                        <a href="#" class="option" onclick="resetGame()">üîÑ Jogar Novamente</a>
                    </div>
                </div>
            `;
            
            contentDiv.innerHTML = html;
        }

        // Reiniciar o jogo
        function resetGame() {
            gameState = {
                inventory: [],
                location: "centro",
                investigouFabrica: false,
                investigouLixao: false,
                investigouEsgoto: false,
                amostrasColetadas: 0,
                evidencias: 0,
                temCracha: false
            };
            localStorage.removeItem('salveORioSave');
            startGame();
        }

        // Iniciar o jogo quando a p√°gina carregar
        window.onload = startGame;
    </script>
</body>
</html>